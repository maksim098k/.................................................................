<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ üéÑ</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: 
        radial-gradient(circle at 20% 80%, rgba(255, 215, 0, 0.15) 0%, transparent 20%),
        radial-gradient(circle at 80% 20%, rgba(255, 20, 147, 0.15) 0%, transparent 20%),
        linear-gradient(135deg, #0a1d3f 0%, #0c2b5e 25%, #0d3b7a 50%, #0f4a97 75%, #1159b4 100%);
      color: white;
      text-align: center;
      overflow-x: hidden;
      position: relative;
      min-height: 100vh;
      -webkit-tap-highlight-color: transparent;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path d="M50,10 L60,40 L90,40 L65,60 L75,90 L50,70 L25,90 L35,60 L10,40 L40,40 Z" fill="gold" opacity="0.1"/></svg>'),
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="10" fill="red" opacity="0.1"/></svg>'),
        url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><polygon points="50,10 60,30 80,30 65,45 75,65 50,55 25,65 35,45 20,30 40,30" fill="silver" opacity="0.1"/></svg>');
      background-size: 80px, 60px, 70px;
      background-position: 10% 20%, 85% 40%, 15% 70%;
      background-repeat: no-repeat;
      pointer-events: none;
      z-index: -1;
    }

    .sparkle {
      position: fixed;
      width: 4px;
      height: 4px;
      background: gold;
      border-radius: 50%;
      animation: sparkle 3s infinite;
      pointer-events: none;
      z-index: -1;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 0; transform: scale(0); }
      50% { opacity: 1; transform: scale(1); }
    }

    h1 {
      margin-top: 20px;
      font-size: 2.8em;
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.7),
                   0 0 20px rgba(255, 20, 147, 0.5),
                   2px 2px 4px rgba(0, 0, 0, 0.3);
      background: linear-gradient(45deg, #FFD700, #FF69B4, #00CED1);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      padding: 10px;
    }

    #countdown {
      font-size: 1.8em;
      margin: 20px 0;
      padding: 15px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 15px;
      display: inline-block;
      border: 2px solid gold;
      box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
      backdrop-filter: blur(5px);
    }

    button {
      padding: 12px 25px;
      margin: 10px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(45deg, #FF416C, #FF4B2B);
      color: white;
      cursor: pointer;
      font-size: 1.1em;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(255, 65, 108, 0.4);
      position: relative;
      overflow: hidden;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }

    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(255, 65, 108, 0.6);
      background: linear-gradient(45deg, #FF4B2B, #FF416C);
    }

    button:active {
      transform: translateY(1px);
    }

    button::after {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: 0.5s;
    }

    button:hover::after {
      left: 100%;
    }

    #card, #wish, #gallery, #game {
      margin: 30px auto;
      padding: 25px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      width: 90%;
      max-width: 800px;
      border: 1px solid rgba(255, 215, 0, 0.3);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(10px);
      position: relative;
      overflow: hidden;
    }

    #card::before, #wish::before, #gallery::before, #game::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #FFD700, #FF69B4, #00CED1, #FFD700);
      background-size: 400% 100%;
      animation: shimmer 3s linear infinite;
    }

    @keyframes shimmer {
      0% { background-position: 0% 0; }
      100% { background-position: 400% 0; }
    }

    /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –≥–∞–ª–µ—Ä–µ–µ */
    #gallery img {
      width: 180px;
      height: 180px;
      margin: 15px;
      border: 3px solid rgba(255, 215, 0, 0.5);
      border-radius: 15px;
      transition: all 0.3s ease;
      object-fit: cover;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      cursor: pointer;
    }

    #gallery img:hover {
      transform: scale(1.05);
      border-color: #FF69B4;
      box-shadow: 0 8px 25px rgba(255, 105, 180, 0.4);
    }

    .snowflake {
      position: fixed;
      top: -10px;
      color: white;
      font-size: 24px;
      animation: fall linear infinite;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
      opacity: 0.8;
      z-index: -1;
    }

    @keyframes fall {
      to {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    #gameCanvas {
      background: linear-gradient(to bottom, #001a33, #003366);
      border: 3px solid gold;
      border-radius: 10px;
      display: block;
      margin: 20px auto;
      box-shadow: 0 0 20px rgba(255, 215, 0, 0.3);
      max-width: 100%;
      height: auto;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 15px 0;
      align-items: center;
      flex-wrap: wrap;
    }

    .key {
      padding: 8px 15px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 5px;
      border: 1px solid gold;
      font-weight: bold;
      min-width: 40px;
    }

    .game-stats {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 15px 0;
      flex-wrap: wrap;
    }

    .stat-item {
      background: rgba(255, 255, 255, 0.1);
      padding: 10px 20px;
      border-radius: 10px;
      border: 1px solid rgba(255, 215, 0, 0.3);
      min-width: 120px;
    }

    .music-note {
      position: fixed;
      bottom: 20px;
      right: 20px;
      color: gold;
      font-size: 24px;
      animation: bounce 2s infinite;
      z-index: 1000;
      cursor: pointer;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      padding: 10px;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* === –°–ï–ù–°–û–†–ù–û–ï –£–ü–†–ê–í–õ–ï–ù–ò–ï –î–õ–Ø –ò–ì–†–´ === */
    .touch-controls {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 25px 0;
      flex-wrap: wrap;
      touch-action: manipulation;
    }
    
    .touch-btn {
      padding: 25px 40px;
      background: linear-gradient(45deg, #4CAF50, #45a049);
      color: white;
      border: none;
      border-radius: 20px;
      font-size: 32px;
      font-weight: bold;
      cursor: pointer;
      min-width: 100px;
      box-shadow: 0 8px 0 #388E3C, 0 12px 20px rgba(0,0,0,0.4);
      transition: all 0.1s;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    
    .touch-btn:active {
      transform: translateY(6px);
      box-shadow: 0 2px 0 #388E3C, 0 4px 10px rgba(0,0,0,0.3);
    }
    
    .pause-btn {
      background: linear-gradient(45deg, #2196F3, #1976D2);
      box-shadow: 0 8px 0 #1565C0, 0 12px 20px rgba(0,0,0,0.4);
      min-width: 120px;
    }
    
    .pause-btn:active {
      box-shadow: 0 2px 0 #1565C0, 0 4px 10px rgba(0,0,0,0.3);
    }
    
    .mobile-instruction {
      background: rgba(255, 215, 0, 0.2);
      padding: 15px;
      border-radius: 10px;
      margin: 20px 0;
      border: 2px dashed rgba(255, 215, 0, 0.5);
    }

    /* === –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û === */
    .modal {
      display: none;
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.95);
      animation: fadeIn 0.3s ease;
      touch-action: pan-y;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      margin: auto;
      display: block;
      max-width: 95%;
      max-height: 80vh;
      border-radius: 10px;
      box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
      animation: zoomIn 0.3s ease;
      touch-action: pan-y pinch-zoom;
    }

    @keyframes zoomIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .close {
      position: absolute;
      top: 20px;
      right: 30px;
      color: white;
      font-size: 40px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10000;
      background: rgba(0, 0, 0, 0.5);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      -webkit-tap-highlight-color: transparent;
    }

    .close:hover {
      color: #FF69B4;
      transform: rotate(90deg) scale(1.1);
    }

    #caption {
      margin: 15px auto;
      text-align: center;
      color: white;
      font-size: 1.2em;
      max-width: 90%;
      padding: 10px;
    }

    .modal-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      padding: 20px 25px;
      font-size: 28px;
      cursor: pointer;
      border-radius: 50%;
      transition: all 0.3s ease;
      z-index: 10000;
      -webkit-tap-highlight-color: transparent;
    }

    .modal-nav:hover {
      background-color: rgba(255, 215, 0, 0.8);
      transform: translateY(-50%) scale(1.1);
    }

    .prev {
      left: 20px;
    }

    .next {
      right: 20px;
    }

    .image-counter {
      position: absolute;
      top: 20px;
      left: 30px;
      color: white;
      font-size: 18px;
      background: rgba(0, 0, 0, 0.5);
      padding: 8px 15px;
      border-radius: 20px;
      z-index: 10000;
    }

    /* === –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –¢–ï–õ–ï–§–û–ù–û–í === */
    @media (max-width: 768px) {
      h1 { 
        font-size: 2em; 
        margin-top: 15px;
        padding: 5px;
      }
      
      #countdown { 
        font-size: 1.3em; 
        margin: 15px 0;
        padding: 12px;
      }
      
      #gallery img { 
        width: 140px; 
        height: 140px; 
        margin: 10px;
      }
      
      button { 
        padding: 12px 20px; 
        font-size: 1em; 
        margin: 8px;
        width: 90%;
        max-width: 300px;
      }
      
      .game-stats { 
        gap: 10px; 
      }
      
      .stat-item { 
        padding: 8px 12px; 
        font-size: 0.9em;
        min-width: 100px;
      }
      
      .music-note { 
        bottom: 15px; 
        right: 15px; 
        font-size: 20px;
        width: 45px;
        height: 45px;
      }
      
      .modal-nav {
        padding: 15px 20px;
        font-size: 24px;
      }
      
      .prev { left: 15px; }
      .next { right: 15px; }
      
      .close {
        top: 15px;
        right: 20px;
        font-size: 35px;
        width: 45px;
        height: 45px;
      }
      
      .image-counter {
        top: 15px;
        left: 20px;
        font-size: 16px;
        padding: 6px 12px;
      }
      
      #gameCanvas {
        width: 95% !important;
        height: 300px !important;
      }
      
      .touch-btn {
        padding: 20px 30px;
        font-size: 28px;
        min-width: 80px;
      }
      
      .pause-btn {
        min-width: 100px;
      }
    }
    
    /* –î–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
    @media (max-width: 480px) {
      h1 { 
        font-size: 1.7em; 
        margin-top: 10px;
      }
      
      #gallery img { 
        width: 100px; 
        height: 100px;
        margin: 6px;
      }
      
      button { 
        padding: 10px 15px; 
        font-size: 0.9em; 
        margin: 5px;
      }
      
      #card, #wish, #gallery, #game {
        width: 95% !important;
        padding: 15px !important;
        margin: 20px auto !important;
      }
      
      .touch-btn {
        padding: 18px 25px;
        font-size: 24px;
        min-width: 70px;
      }
      
      .pause-btn {
        min-width: 90px;
      }
      
      .stat-item {
        min-width: 80px;
        padding: 6px 10px;
        font-size: 0.8em;
      }
      
      .game-stats {
        gap: 8px;
      }
    }
    
    /* –î–ª—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–π –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ */
    @media (max-height: 500px) and (orientation: landscape) {
      h1 { 
        font-size: 1.5em; 
        margin-top: 5px;
      }
      
      #countdown { 
        margin: 10px 0; 
        padding: 8px; 
        font-size: 1em; 
      }
      
      button { 
        padding: 8px 15px; 
        font-size: 0.9em; 
        margin: 3px;
      }
      
      #gallery img { 
        width: 80px; 
        height: 80px;
        margin: 4px;
      }
      
      .touch-btn {
        padding: 15px 20px;
        font-size: 20px;
        min-width: 60px;
      }
      
      #gameCanvas {
        height: 250px !important;
      }
    }
    
    /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
    * {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    
    /* –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —Ç–µ–∫—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è */
    p, h1, h2, h3, span {
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }
  </style>
</head>
<body>
  <!-- –ö–Ω–æ–ø–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è –º—É–∑—ã–∫–∏ -->
  <div class="music-note" title="–í–∫–ª—é—á–∏—Ç—å –Ω–æ–≤–æ–≥–æ–¥–Ω—é—é –º—É–∑—ã–∫—É" onclick="playMusic()">üéµ</div>

  <h1>–° –ù–æ–≤—ã–º –ì–æ–¥–æ–º, –¥—Ä—É–∑—å—è! üéâ</h1>
  <div id="countdown"></div>

  <button onclick="showCard()">üéÅ –û—Ç–∫—Ä—ã—Ç–∫–∞</button>
  <button onclick="generateWish()">‚ú® –ü–æ–∂–µ–ª–∞–Ω–∏–µ</button>
  <button onclick="showGallery()">üì∏ –ì–∞–ª–µ—Ä–µ—è</button>
  <button onclick="startGame()">üéÆ –ü–æ–º–æ–≥–∏ –î–µ–¥—É –ú–æ—Ä–æ–∑—É</button>
  <button onclick="playMusic()" style="background: linear-gradient(45deg, #4CAF50, #45a049);">üéµ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É</button>

  <div id="card" style="display:none;">
    <h2>üéÑ –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –æ—Ç–∫—Ä—ã—Ç–∫–∞</h2>
    <p style="font-size: 1.2em; line-height: 1.6;">
      –î–æ—Ä–æ–≥–∏–µ –¥—Ä—É–∑—å—è!<br>
      –ü—É—Å—Ç—å –ù–æ–≤—ã–π 2026 –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å—ë—Ç –≤ –≤–∞—à –¥–æ–º<br>
      —Ä–∞–¥–æ—Å—Ç—å, —É–¥–∞—á—É, –ª—é–±–æ–≤—å –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∞–º—ã—Ö —Å–æ–∫—Ä–æ–≤–µ–Ω–Ω—ã—Ö –º–µ—á—Ç–∞–Ω–∏–π!<br>
      ‚ù§Ô∏èüéÖüåü
    </p>
  </div>

  <div id="wish" style="display:none;">
    <h2>üåü –°–ª—É—á–∞–π–Ω–æ–µ –ø–æ–∂–µ–ª–∞–Ω–∏–µ</h2>
    <p id="wishText" style="font-size: 1.3em; font-style: italic;"></p>
  </div>

  <div id="gallery" style="display:none;">
    <h2>üéûÔ∏è –ì–∞–ª–µ—Ä–µ—è –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–π</h2>
    <div>
      <img src="1.jpg" alt="–§–æ—Ç–æ 1" onclick="openModal(0)">
      <img src="2.jpg" alt="–§–æ—Ç–æ 2" onclick="openModal(1)">
      <img src="3.jpg" alt="–§–æ—Ç–æ 3" onclick="openModal(2)">
      <img src="4.jpg" alt="–§–æ—Ç–æ 4" onclick="openModal(3)">
      <img src="5.jpg" alt="–§–æ—Ç–æ 5" onclick="openModal(4)">
      <img src="6.jpg" alt="–§–æ—Ç–æ 6" onclick="openModal(5)">
      <img src="7.jpg" alt="–§–æ—Ç–æ 7" onclick="openModal(6)">
      <img src="8.jpg" alt="–§–æ—Ç–æ 8" onclick="openModal(7)">
      <img src="9.jpg" alt="–§–æ—Ç–æ 9" onclick="openModal(8)">
      <img src="10.jpg" alt="–§–æ—Ç–æ 10" onclick="openModal(9)">
      <img src="11.jpg" alt="–§–æ—Ç–æ 11" onclick="openModal(10)">
      <img src="12.jpg" alt="–§–æ—Ç–æ 12" onclick="openModal(11)">
      <img src="13.jpg" alt="–§–æ—Ç–æ 13" onclick="openModal(12)">
      <img src="14.jpg" alt="–§–æ—Ç–æ 14" onclick="openModal(13)">
      <img src="15.jpg" alt="–§–æ—Ç–æ 15" onclick="openModal(14)">
      <img src="16.jpg" alt="–§–æ—Ç–æ 16" onclick="openModal(15)">
      <img src="17.jpg" alt="–§–æ—Ç–æ 17" onclick="openModal(16)">
      <img src="18.jpg" alt="–§–æ—Ç–æ 18" onclick="openModal(17)">
      <img src="19.jpg" alt="–§–æ—Ç–æ 19" onclick="openModal(18)">
      <img src="20.jpg" alt="–§–æ—Ç–æ 20" onclick="openModal(19)">
    </div>
    
    <p style="margin-top: 20px; opacity: 0.8;">
      <small>üéØ –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ª—é–±—É—é —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ –ø–æ–ª–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ</small>
    </p>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ—Ä–∞–∑–º–µ—Ä–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ -->
  <div id="imageModal" class="modal">
    <span class="close" onclick="closeModal()">&times;</span>
    <div class="image-counter" id="imageCounter">1 / 20</div>
    
    <button class="modal-nav prev" onclick="changeImage(-1)">&#10094;</button>
    <button class="modal-nav next" onclick="changeImage(1)">&#10095;</button>
    
    <img class="modal-content" id="fullImage">
    <div id="caption"></div>
  </div>

  <div id="game" style="display:none;">
    <h2>üéÖ –î–µ–¥ –ú–æ—Ä–æ–∑ —Å–æ–±–∏—Ä–∞–µ—Ç —à–∞–º–ø–∞–Ω—Å–∫–æ–µ ü•Ç</h2>
    <p>–ü–æ–º–æ–≥–∏ –î–µ–¥—É –ú–æ—Ä–æ–∑—É —Å–æ–±—Ä–∞—Ç—å –±—É—Ç—ã–ª–∫–∏ —à–∞–º–ø–∞–Ω—Å–∫–æ–≥–æ –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–≥–æ —Å—Ç–æ–ª–∞!</p>
    
    <!-- –°–µ–Ω—Å–æ—Ä–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ -->
    <div class="mobile-instruction">
      <p>üì± <strong>–ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ:</strong> –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –Ω–∏–∂–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
    </div>
    
    <div class="touch-controls">
      <button class="touch-btn" 
              ontouchstart="moveSantaLeft()" 
              ontouchend="stopSanta()"
              onmousedown="moveSantaLeft()"
              onmouseup="stopSanta()"
              onmouseleave="stopSanta()">‚Üê</button>
      
      <button class="touch-btn pause-btn" 
              onclick="togglePause()">‚è∏Ô∏è/‚ñ∂Ô∏è</button>
      
      <button class="touch-btn" 
              ontouchstart="moveSantaRight()" 
              ontouchend="stopSanta()"
              onmousedown="moveSantaRight()"
              onmouseup="stopSanta()"
              onmouseleave="stopSanta()">‚Üí</button>
    </div>
    
    <div class="controls">
      <div class="key">‚Üê</div>
      <span>–í–ª–µ–≤–æ</span>
      <div class="key">‚Üí</div>
      <span>–í–ø—Ä–∞–≤–æ</span>
      <div class="key">–ü—Ä–æ–±–µ–ª</div>
      <span>–ü–∞—É–∑–∞</span>
    </div>
    
    <canvas id="gameCanvas" width="600" height="400"></canvas>
    
    <div class="game-stats">
      <div class="stat-item" style="color: gold;">
        üèÜ –û—á–∫–∏: <span id="score">0</span>
      </div>
      <div class="stat-item" style="color: #4CAF50;">
        ü•Ç –ü–æ–π–º–∞–Ω–æ: <span id="caught">0</span>
      </div>
      <div class="stat-item" style="color: #FF416C;">
        üíî –£–ø—É—â–µ–Ω–æ: <span id="missed">0</span>/10
      </div>
      <div class="stat-item" style="color: #00CED1;">
        ‚è±Ô∏è –í—Ä–µ–º—è: <span id="gameTime">00:00</span>
      </div>
    </div>
    
    <div id="message" style="color: #FFD700; font-weight: bold; height: 40px; margin-top: 15px; font-size: 1.1em;"></div>
    
    <div style="margin-top: 20px; font-size: 0.9em; opacity: 0.8;">
      <p>üìà –°–ª–æ–∂–Ω–æ—Å—Ç—å —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥!</p>
      <p>üéØ –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–æ–ª—å—à–∏–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
    </div>
  </div>

  <script>
    // ============= –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï =============
    let currentImageIndex = 0;
    let gameState = {
      active: false,
      santaMove: 0,
      gamePaused: false
    };
    let audio = null;
    
    // –ú–∞—Å—Å–∏–≤ —Å –ø—É—Ç—è–º–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
    const galleryImages = [
      "1.jpg", "2.jpg", "3.jpg", "4.jpg", "5.jpg",
      "6.jpg", "7.jpg", "8.jpg", "9.jpg", "10.jpg",
      "11.jpg", "12.jpg", "13.jpg", "14.jpg", "15.jpg",
      "16.jpg", "17.jpg", "18.jpg", "19.jpg", "20.jpg"
    ];

    // ============= –§–£–ù–ö–¶–ò–ò –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê =============
    function openModal(index) {
      currentImageIndex = index;
      updateModal();
      document.getElementById('imageModal').style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      document.getElementById('imageModal').style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    function updateModal() {
      const modalImg = document.getElementById('fullImage');
      const caption = document.getElementById('caption');
      const counter = document.getElementById('imageCounter');
      
      modalImg.src = galleryImages[currentImageIndex];
      modalImg.alt = `–§–æ—Ç–æ ${currentImageIndex + 1}`;
      caption.textContent = `–í–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏–µ ${currentImageIndex + 1} –∏–∑ ${galleryImages.length}`;
      counter.textContent = `${currentImageIndex + 1} / ${galleryImages.length}`;
    }

    function changeImage(direction) {
      currentImageIndex += direction;
      
      if (currentImageIndex < 0) {
        currentImageIndex = galleryImages.length - 1;
      } else if (currentImageIndex >= galleryImages.length) {
        currentImageIndex = 0;
      }
      
      updateModal();
    }

    // ============= –£–ü–†–ê–í–õ–ï–ù–ò–ï –ú–û–î–ê–õ–¨–ù–´–ú –û–ö–ù–û–ú –° –ö–õ–ê–í–ò–ê–¢–£–†–´ =============
    document.addEventListener('keydown', (e) => {
      const modal = document.getElementById('imageModal');
      if (modal.style.display === 'block') {
        switch(e.key) {
          case 'ArrowLeft': changeImage(-1); break;
          case 'ArrowRight': changeImage(1); break;
          case 'Escape': closeModal(); break;
        }
      }
    });

    // –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    document.getElementById('imageModal').onclick = function(event) {
      if (event.target.classList.contains('modal')) {
        closeModal();
      }
    };

    // ============= –ú–£–ó–´–ö–ê =============
    function playMusic() {
      if (!audio) {
        audio = new Audio();
        audio.src = "https://assets.mixkit.co/music/preview/mixkit-jingle-bells-311.mp3";
        audio.loop = true;
        audio.volume = 0.3;
      }
      
      if (audio.paused) {
        const playPromise = audio.play();
        if (playPromise !== undefined) {
          playPromise.catch(error => {
            // –î–ª—è iOS –Ω—É–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
            alert('–ù–∞–∂–º–∏—Ç–µ "–í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É" –¥–ª—è –∑–∞–ø—É—Å–∫–∞');
          });
        }
      }
    }

    // ============= –¢–ê–ô–ú–ï–† –û–ë–†–ê–¢–ù–û–ì–û –û–¢–°–ß–Å–¢–ê =============
    function updateCountdown() {
      const newYear = new Date("Jan 1, 2026 00:00:00").getTime();
      const now = new Date().getTime();
      const diff = newYear - now;

      const days = Math.floor(diff / (1000 * 60 * 60 * 24));
      const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000*60*60));
      const minutes = Math.floor((diff % (1000*60*60)) / (1000*60));
      const seconds = Math.floor((diff % (1000*60)) / 1000);

      document.getElementById("countdown").innerHTML =
        `üéÑ –î–æ –ù–æ–≤–æ–≥–æ –≥–æ–¥–∞: <br><span style="color: gold; font-size: 1.2em;">${days}–¥ ${hours}—á ${minutes}–º ${seconds}—Å</span>`;
    }
    setInterval(updateCountdown, 1000);
    updateCountdown();

    // ============= –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò =============
    function showCard() {
      hideAll();
      document.getElementById("card").style.display = "block";
    }

    const wishes = [
      "–ü—É—Å—Ç—å —Å—á–∞—Å—Ç—å–µ –±—É–¥–µ—Ç —Ä—è–¥–æ–º –≤–µ—Å—å –≥–æ–¥, –∞ —É–¥–∞—á–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–∫–∏–¥–∞–µ—Ç!",
      "–ó–¥–æ—Ä–æ–≤—å—è –∫—Ä–µ–ø–∫–æ–≥–æ, —Ä–∞–¥–æ—Å—Ç–∏ –±–µ–∑–º–µ—Ä–Ω–æ–π –∏ —Å–∫–∞–∑–æ—á–Ω–æ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è!",
      "–ü—É—Å—Ç—å –º–µ—á—Ç—ã –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è, –∞ —É–ª—ã–±–∫–∏ –Ω–µ –∏—Å—á–µ–∑–∞—é—Ç —Å –≤–∞—à–∏—Ö –ª–∏—Ü!",
      "–ù–æ–≤—ã—Ö –ø–æ–±–µ–¥, —è—Ä–∫–∏—Ö –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–π –∏ —Ç–µ–ø–ª—ã—Ö –≤—Å—Ç—Ä–µ—á –≤ –Ω–æ–≤–æ–º –≥–æ–¥—É!",
      "–ü—É—Å—Ç—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω –≤–æ–ª—à–µ–±—Å—Ç–≤–æ–º –∏ –¥–æ–±—Ä–æ—Ç–æ–π!",
      "–ü—Ä–æ—Ü–≤–µ—Ç–∞–Ω–∏—è, –≥–∞—Ä–º–æ–Ω–∏–∏ –∏ —É—é—Ç–∞ –≤ –≤–∞—à–µ–º –¥–æ–º–µ!",
      "–ü—É—Å—Ç—å –∞–Ω–≥–µ–ª-—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Ä—è–¥–æ–º –∏ –æ–±–µ—Ä–µ–≥–∞–µ—Ç –≤–∞—Å!"
    ];

    function generateWish() {
      hideAll();
      document.getElementById("wish").style.display = "block";
      const randomWish = wishes[Math.floor(Math.random() * wishes.length)];
      document.getElementById("wishText").innerHTML = `"${randomWish}"`;
    }

    function showGallery() {
      hideAll();
      document.getElementById("gallery").style.display = "block";
    }

    function hideAll(){
      document.getElementById("card").style.display="none";
      document.getElementById("wish").style.display="none";
      document.getElementById("gallery").style.display="none";
      document.getElementById("game").style.display="none";
    }

    // ============= –§–£–ù–ö–¶–ò–ò –£–ü–†–ê–í–õ–ï–ù–ò–Ø –î–õ–Ø –¢–ï–õ–ï–§–û–ù–ê =============
    function moveSantaLeft() {
      gameState.santaMove = -1;
    }
    
    function moveSantaRight() {
      gameState.santaMove = 1;
    }
    
    function stopSanta() {
      gameState.santaMove = 0;
    }
    
    function togglePause() {
      if (gameState.active) {
        gameState.gamePaused = !gameState.gamePaused;
        showMessage(gameState.gamePaused ? '‚è∏Ô∏è –ü–∞—É–∑–∞' : '‚ñ∂Ô∏è –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è!', '#00CED1');
        if (!gameState.gamePaused) gameLoop();
      }
    }

    // ============= –ü–û–õ–ù–´–ô –ö–û–î –ò–ì–†–´ =============
    function startGame() {
      hideAll();
      document.getElementById("game").style.display = "block";
      
      const canvas = document.getElementById("gameCanvas");
      const ctx = canvas.getContext("2d");
      
      // –ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∫–∞–Ω–≤–∞—Å–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
      if (window.innerWidth < 768) {
        canvas.width = window.innerWidth * 0.9;
        canvas.height = 400;
      }
      
      // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
      let score = 0;
      let caught = 0;
      let missed = 0;
      let spawnRate = 0.008;
      let gameSpeed = 1.5;
      let bottles = [];
      let startTime = Date.now();
      let gameTime = 0;
      let difficultyLevel = 1;
      
      gameState.active = true;
      gameState.gamePaused = false;
      gameState.santaMove = 0;
      
      // –î–µ–¥ –ú–æ—Ä–æ–∑
      const santa = {
        x: canvas.width / 2 - 50,
        y: canvas.height - 150,
        width: canvas.width < 400 ? 80 : 100,
        height: canvas.width < 400 ? 120 : 150,
        speed: 7,
        direction: 0,
        frame: 0,
        animationSpeed: 0.2
      };
      
      // –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —à–∞–º–ø–∞–Ω—Å–∫–æ–≥–æ
      const champagneTypes = [
        { name: "–û–±—ã—á–Ω–æ–µ", color: "#FFD700", points: 10, rarity: 70 },
        { name: "–ò–≥—Ä–∏—Å—Ç–æ–µ", color: "#FF69B4", points: 15, rarity: 20 },
        { name: "–í–∏–Ω—Ç–∞–∂–Ω–æ–µ", color: "#C0C0C0", points: 25, rarity: 8 },
        { name: "–ü–æ–¥–∞—Ä–æ—á–Ω–æ–µ", color: "#00CED1", points: 35, rarity: 2 }
      ];
      
      // –°–æ–∑–¥–∞–µ–º –±—É—Ç—ã–ª–∫—É —à–∞–º–ø–∞–Ω—Å–∫–æ–≥–æ
      function createBottle() {
        let rand = Math.random() * 100;
        let selectedType = champagneTypes[0];
        let cumulative = 0;
        
        for (const type of champagneTypes) {
          cumulative += type.rarity;
          if (rand <= cumulative) {
            selectedType = type;
            break;
          }
        }
        
        const bottleSize = canvas.width < 400 ? 20 : 25;
        
        return {
          x: Math.random() * (canvas.width - 40),
          y: -60,
          width: bottleSize,
          height: bottleSize * 2.4,
          speed: 1.5 + Math.random() * gameSpeed,
          type: selectedType,
          rotation: Math.random() * 0.1 - 0.05,
          angle: 0,
          sparkle: selectedType.name === "–í–∏–Ω—Ç–∞–∂–Ω–æ–µ" || selectedType.name === "–ü–æ–¥–∞—Ä–æ—á–Ω–æ–µ"
        };
      }
      
      // –†–∏—Å—É–µ–º –î–µ–¥–∞ –ú–æ—Ä–æ–∑–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞)
      function drawSanta() {
        ctx.save();
        ctx.translate(santa.x + santa.width / 2, santa.y + santa.height);
        
        if (santa.direction !== 0) {
          santa.frame += santa.animationSpeed;
          const walkOffset = Math.sin(santa.frame) * 3;
          ctx.translate(0, walkOffset);
        }
        
        // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        ctx.fillStyle = '#C41E3A';
        ctx.beginPath();
        ctx.roundRect(-santa.width/2, -santa.height, santa.width, santa.height, 10);
        ctx.fill();
        
        // –ì–æ–ª–æ–≤–∞
        ctx.fillStyle = '#FFE4C4';
        ctx.beginPath();
        ctx.arc(0, -santa.height - 20, 20, 0, Math.PI * 2);
        ctx.fill();
        
        // –ë–æ—Ä–æ–¥–∞
        ctx.fillStyle = 'white';
        ctx.beginPath();
        ctx.ellipse(0, -santa.height + 10, 18, 25, 0, 0, Math.PI * 2);
        ctx.fill();
        
        // –®–∞–ø–∫–∞
        ctx.fillStyle = '#C41E3A';
        ctx.beginPath();
        ctx.moveTo(-18, -santa.height - 20);
        ctx.lineTo(18, -santa.height - 20);
        ctx.lineTo(12, -santa.height - 50);
        ctx.lineTo(-12, -santa.height - 50);
        ctx.closePath();
        ctx.fill();
        
        // –ü–æ–º–ø–æ–Ω
        ctx.fillStyle = 'white';
        ctx.beginPath();
        ctx.arc(0, -santa.height - 50, 8, 0, Math.PI * 2);
        ctx.fill();
        
        // –ú–µ—à–æ–∫
        ctx.fillStyle = '#8B4513';
        ctx.fillRect(-20, -30, 40, 30);
        
        ctx.restore();
      }
      
      // –†–∏—Å—É–µ–º –±—É—Ç—ã–ª–∫—É (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
      function drawBottle(bottle) {
        ctx.save();
        ctx.translate(bottle.x + bottle.width / 2, bottle.y + bottle.height / 2);
        ctx.rotate(bottle.angle);
        bottle.angle += bottle.rotation;
        
        ctx.fillStyle = bottle.type.color;
        ctx.fillRect(-bottle.width/2, -bottle.height/2, bottle.width, bottle.height);
        
        // –ì–æ—Ä–ª—ã—à–∫–æ
        ctx.fillStyle = '#8B4513';
        ctx.fillRect(-bottle.width/3, -bottle.height/2, bottle.width/1.5, 8);
        
        // –≠—Ç–∏–∫–µ—Ç–∫–∞
        ctx.fillStyle = 'white';
        ctx.fillRect(-bottle.width/2 + 2, -bottle.height/4, bottle.width - 4, bottle.height/4);
        
        // –ë–ª–µ—Å—Ç–∫–∏ –¥–ª—è –æ—Å–æ–±—ã—Ö –±—É—Ç—ã–ª–æ–∫
        if (bottle.sparkle) {
          ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
          ctx.beginPath();
          ctx.arc(0, 0, 3, 0, Math.PI * 2);
          ctx.fill();
        }
        
        ctx.restore();
      }
      
      // –†–∏—Å—É–µ–º —Ñ–æ–Ω
      function drawBackground() {
        const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
        gradient.addColorStop(0, '#0a1d3f');
        gradient.addColorStop(0.7, '#1a3b7f');
        gradient.addColorStop(1, '#2a5abf');
        ctx.fillStyle = gradient;
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        // –ó–≤–µ–∑–¥—ã
        ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
        for (let i = 0; i < 10; i++) {
          const x = (Date.now() / 100 + i * 70) % canvas.width;
          const y = (Date.now() / 80 + i * 50) % canvas.height;
          ctx.beginPath();
          ctx.arc(x, y, 1.5, 0, Math.PI * 2);
          ctx.fill();
        }
      }
      
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è
      function checkCollision(bottle) {
        const santaCenterX = santa.x + santa.width / 2;
        const santaCenterY = santa.y + santa.height - 40;
        const bottleCenterX = bottle.x + bottle.width / 2;
        const bottleCenterY = bottle.y + bottle.height / 2;
        
        const distance = Math.sqrt(
          Math.pow(santaCenterX - bottleCenterX, 2) + 
          Math.pow(santaCenterY - bottleCenterY, 2)
        );
        
        return distance < 50;
      }
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
      function updateStats() {
        document.getElementById('score').textContent = score;
        document.getElementById('caught').textContent = caught;
        document.getElementById('missed').textContent = missed;
        
        const seconds = Math.floor(gameTime / 1000);
        const minutes = Math.floor(seconds / 60);
        const displaySeconds = seconds % 60;
        document.getElementById('gameTime').textContent = 
          `${minutes.toString().padStart(2, '0')}:${displaySeconds.toString().padStart(2, '0')}`;
      }
      
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
      function showMessage(text, color = '#FFD700') {
        const messageEl = document.getElementById('message');
        messageEl.textContent = text;
        messageEl.style.color = color;
        messageEl.style.opacity = '1';
        
        setTimeout(() => {
          messageEl.style.opacity = '0';
          setTimeout(() => {
            messageEl.textContent = '';
            messageEl.style.opacity = '1';
          }, 300);
        }, 2000);
      }
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ª–æ–∂–Ω–æ—Å—Ç—å
      function updateDifficulty() {
        const newDifficulty = Math.floor(gameTime / 30000) + 1;
        
        if (newDifficulty > difficultyLevel) {
          difficultyLevel = newDifficulty;
          gameSpeed = 1.5 + (difficultyLevel * 0.3);
          spawnRate = 0.008 + (difficultyLevel * 0.002);
          
          showMessage(
            `üìà –£—Ä–æ–≤–µ–Ω—å ${difficultyLevel}! –ë—ã—Å—Ç—Ä–µ–µ –∏ –±–æ–ª—å—à–µ –±—É—Ç—ã–ª–æ–∫!`,
            '#FF69B4'
          );
        }
      }
      
      // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (–¥–ª—è –∫–æ–º–ø—å—é—Ç–µ—Ä–∞)
      document.addEventListener('keydown', (e) => {
        if (!gameState.active || gameState.gamePaused) return;
        
        switch(e.key) {
          case 'ArrowLeft':
            santa.x = Math.max(0, santa.x - santa.speed);
            santa.direction = -1;
            break;
          case 'ArrowRight':
            santa.x = Math.min(canvas.width - santa.width, santa.x + santa.speed);
            santa.direction = 1;
            break;
          case ' ':
            togglePause();
            break;
        }
      });
      
      document.addEventListener('keyup', (e) => {
        if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
          santa.direction = 0;
        }
      });
      
      // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
      function gameLoop() {
        if (!gameState.active || gameState.gamePaused) return;
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å —Å–µ–Ω—Å–æ—Ä–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫
        if (gameState.santaMove !== 0) {
          santa.x = Math.max(0, Math.min(canvas.width - santa.width, 
                         santa.x + (santa.speed * gameState.santaMove)));
          santa.direction = gameState.santaMove;
        }
        
        gameTime = Date.now() - startTime;
        drawBackground();
        drawSanta();
        
        if (Math.random() < spawnRate) {
          bottles.push(createBottle());
        }
        
        for (let i = bottles.length - 1; i >= 0; i--) {
          const bottle = bottles[i];
          bottle.y += bottle.speed;
          
          if (checkCollision(bottle)) {
            score += bottle.type.points;
            caught++;
            bottles.splice(i, 1);
            
            showMessage(`ü•Ç +${bottle.type.points} –æ—á–∫–æ–≤!`, '#FFD700');
            continue;
          }
          
          if (bottle.y > canvas.height + 50) {
            bottles.splice(i, 1);
            missed++;
            
            if (missed % 3 === 0 && missed > 0) {
              showMessage(`üíî –†–∞–∑–±–∏–ª–∞—Å—å –±—É—Ç—ã–ª–∫–∞!`, '#FF416C');
            }
          }
          
          drawBottle(bottle);
        }
        
        updateDifficulty();
        
        if (missed >= 10) {
          gameState.active = false;
          
          setTimeout(() => {
            const resultMessage = `üéÆ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!\n\nüèÜ –ò—Ç–æ–≥–æ–≤—ã–π —Å—á—ë—Ç: ${score}\nü•Ç –ü–æ–π–º–∞–Ω–æ –±—É—Ç—ã–ª–æ–∫: ${caught}\n‚è±Ô∏è –í—Ä–µ–º—è –∏–≥—Ä—ã: ${Math.floor(gameTime/1000)} —Å–µ–∫.\nüìà –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏: ${difficultyLevel}\n\n–•–æ—Ç–∏—Ç–µ —Å—ã–≥—Ä–∞—Ç—å –µ—â–µ —Ä–∞–∑?`;
            
            if (confirm(resultMessage)) {
              restartGame();
            }
          }, 500);
        }
        
        updateStats();
        requestAnimationFrame(gameLoop);
      }
      
      // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
      function restartGame() {
        score = 0;
        caught = 0;
        missed = 0;
        spawnRate = 0.008;
        gameSpeed = 1.5;
        bottles = [];
        gameState.active = true;
        gameState.gamePaused = false;
        difficultyLevel = 1;
        santa.x = canvas.width / 2 - 50;
        santa.direction = 0;
        santa.frame = 0;
        startTime = Date.now();
        gameTime = 0;
        gameState.santaMove = 0;
        document.getElementById('message').textContent = '';
        showMessage('üéÆ –£–¥–∞—á–∏! –ü–æ–º–æ–≥–∏ –î–µ–¥—É –ú–æ—Ä–æ–∑—É!', '#4CAF50');
        gameLoop();
      }
      
      showMessage('üéÆ –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –î–µ–¥–æ–º –ú–æ—Ä–æ–∑–æ–º –∫–Ω–æ–ø–∫–∞–º–∏ –∏–ª–∏ —Å—Ç—Ä–µ–ª–∫–∞–º–∏', '#4CAF50');
      gameLoop();
    }

    // ============= –î–ï–ö–û–†–ê–¢–ò–í–ù–´–ï –≠–§–§–ï–ö–¢–´ =============
    function createSnowflake() {
      const snowflake = document.createElement("div");
      snowflake.classList.add("snowflake");
      snowflake.innerHTML = ["‚ùÑ", "‚ùÖ", "‚ùÜ"][Math.floor(Math.random()*3)];
      snowflake.style.left = Math.random() * window.innerWidth + "px";
      snowflake.style.animationDuration = (Math.random()*5+3)+"s";
      snowflake.style.fontSize = (Math.random()*15+10)+"px";
      snowflake.style.opacity = Math.random()*0.6+0.4;
      document.body.appendChild(snowflake);
      setTimeout(()=>snowflake.remove(), 8000);
    }
    setInterval(createSnowflake, 200);

    function createSparkle() {
      if (Math.random() > 0.8) {
        const sparkle = document.createElement("div");
        sparkle.classList.add("sparkle");
        sparkle.style.left = Math.random() * window.innerWidth + "px";
        sparkle.style.top = Math.random() * window.innerHeight + "px";
        sparkle.style.animationDelay = Math.random() * 2 + "s";
        sparkle.style.backgroundColor = ["gold", "#FF69B4"][Math.floor(Math.random()*2)];
        document.body.appendChild(sparkle);
        setTimeout(()=>sparkle.remove(), 3000);
      }
    }
    setInterval(createSparkle, 150);

    // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –¥–≤–æ–π–Ω–æ–º —Ç–∞–ø–µ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö
    document.addEventListener('touchstart', function(e) {
      if (e.target.tagName === 'BUTTON') {
        e.preventDefault();
      }
    }, { passive: false });
  </script>
</body>
</html>
